.animation-container {
    grid-row: 3;
    min-height: 0;
    height: 100%;
}

.animation-stage {
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid #2d2d2d;
    background:
        radial-gradient(circle at 50% 48%, rgba(23, 69, 31, 0.95) 0%, rgba(14, 47, 21, 0.95) 48%, rgba(8, 24, 12, 0.98) 100%),
        linear-gradient(180deg, #0f172a 0%, #111827 100%);
    box-shadow: 0 14px 30px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.animation-status {
    position: absolute;
    top: 10px;
    left: 10px;
    z-index: 5;
    font-size: 0.72rem;
    letter-spacing: 0.03em;
    color: #e5e7eb;
    background: rgba(15, 23, 42, 0.76);
    border: 1px solid rgba(148, 163, 184, 0.4);
    border-radius: 999px;
    padding: 0.28rem 0.62rem;
    font-family: 'IBM Plex Mono', monospace;
}

#animation-ground-svg {
    width: 100%;
    height: 100%;
    display: block;
    transition: transform 380ms cubic-bezier(0.2, 0.8, 0.2, 1);
    transform-origin: center;
}

.anim-label {
    font-size: 12px;
    fill: #f8fafc;
    font-family: 'IBM Plex Mono', monospace;
}

.anim-player-body {
    fill: #dbeafe;
}

.anim-player-head {
    fill: #f5d0a9;
}

.anim-limb {
    stroke: #dbeafe;
    stroke-width: 2.2;
    stroke-linecap: round;
}

.anim-bat {
    stroke: #d6b36a;
    stroke-width: 2.3;
    stroke-linecap: round;
}

.anim-player.batter .anim-player-body {
    fill: #93c5fd;
}

.anim-player.bowler .anim-player-body {
    fill: #fdba74;
}

.anim-player.fielder .anim-player-body {
    fill: #a7f3d0;
}

.anim-player.keeper .anim-player-body {
    fill: #fca5a5;
}

.anim-player.umpire .anim-player-body {
    fill: #e5e7eb;
}

.anim-player.stance-left .anim-bat {
    transform-box: fill-box;
    transform-origin: center;
    transform: scaleX(-1) translateX(-5px);
}

.anim-player.stance-right .anim-bat {
    transform-box: fill-box;
    transform-origin: center;
}

.anim-player.pose-runup {
    animation: runupStride 0.25s ease-out;
    transform-origin: center;
}

.anim-player.pose-release {
    animation: bowlRelease 0.26s ease-out;
    transform-origin: center;
}

.anim-player.pose-followthrough {
    animation: bowlFollowThrough 0.3s ease-out;
    transform-origin: center;
}

.anim-player.pose-bat {
    animation: batSwing 0.36s ease-out;
    transform-origin: center;
}

.anim-player.pose-bat-right {
    animation: batSwingRight 0.36s ease-out;
    transform-origin: center;
}

.anim-player.pose-bat-left {
    animation: batSwingLeft 0.36s ease-out;
    transform-origin: center;
}

.anim-player.pose-run {
    animation: sprintStep 0.34s linear;
    transform-origin: center;
}

.anim-player.pose-run-left {
    animation: sprintStepLeft 0.34s linear;
    transform-origin: center;
}

.anim-player.pose-run-right {
    animation: sprintStepRight 0.34s linear;
    transform-origin: center;
}

.anim-player.pose-dive {
    animation: diveStretch 0.3s ease-out;
    transform-origin: center;
}

.anim-player.pose-catch-high {
    animation: catchHigh 0.34s ease-out;
    transform-origin: center;
}

.anim-player.pose-pickup-throw {
    animation: pickupThrow 0.36s ease-out;
    transform-origin: center;
}

.anim-player.pose-celebrate {
    animation: celebrateHop 0.5s ease-out 2;
    transform-origin: center;
}

.anim-player.pose-gesture-four {
    animation: signalFour 0.7s ease-out;
    transform-origin: center;
}

.anim-player.pose-gesture-six {
    animation: signalSix 0.8s ease-out;
    transform-origin: center;
}

.anim-player.pose-gesture-out {
    animation: signalOut 0.6s ease-out 2;
    transform-origin: center;
}

.anim-ball {
    fill: #f8fafc;
    stroke: #ef4444;
    stroke-width: 1.5;
    filter: drop-shadow(0 0 4px rgba(248, 250, 252, 0.7));
}

.anim-ball.hidden {
    opacity: 0;
}

.anim-stumps .anim-stump-line {
    stroke: #e5e7eb;
    stroke-width: 1.6;
    stroke-linecap: round;
}

.anim-stumps .anim-bail-line {
    stroke: #fbbf24;
    stroke-width: 1.4;
    stroke-linecap: round;
}

.anim-stumps.stumps-hit {
    animation: stumpsRattle 0.42s ease-out;
    transform-origin: center;
}

.animation-stage.flash-four {
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.8) inset, 0 14px 30px rgba(0, 0, 0, 0.35);
}

.animation-stage.flash-six {
    box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.85) inset, 0 14px 30px rgba(0, 0, 0, 0.35);
}

.animation-stage.flash-wicket {
    box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.9) inset, 0 14px 30px rgba(0, 0, 0, 0.35);
}

.animation-stage.crowd-pulse {
    animation: crowdPulse 0.55s ease-out;
}

.animation-replay-stinger {
    position: absolute;
    top: 46%;
    left: -40%;
    z-index: 8;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 1rem;
    letter-spacing: 0.2em;
    font-weight: 700;
    color: #f8fafc;
    background: linear-gradient(90deg, rgba(15, 23, 42, 0.2), rgba(15, 23, 42, 0.92), rgba(15, 23, 42, 0.2));
    border-top: 1px solid rgba(148, 163, 184, 0.55);
    border-bottom: 1px solid rgba(148, 163, 184, 0.55);
    padding: 0.32rem 1.2rem;
    opacity: 0;
    pointer-events: none;
    text-transform: uppercase;
}

.animation-replay-stinger.show {
    animation: replaySweep 0.78s ease-out forwards;
}

.animation-event-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 7;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.68rem;
    letter-spacing: 0.03em;
    color: #f8fafc;
    background: rgba(15, 23, 42, 0.82);
    border: 1px solid rgba(148, 163, 184, 0.42);
    border-radius: 8px;
    padding: 0.3rem 0.56rem;
    opacity: 0;
    transform: translateY(-6px);
    transition: opacity 180ms ease, transform 220ms ease;
    white-space: nowrap;
}

.animation-event-badge.show {
    opacity: 1;
    transform: translateY(0);
}

.animation-event-badge.tone-four {
    border-color: rgba(59, 130, 246, 0.8);
    box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.28) inset;
}

.animation-event-badge.tone-six {
    border-color: rgba(139, 92, 246, 0.85);
    box-shadow: 0 0 0 1px rgba(139, 92, 246, 0.28) inset;
}

.animation-event-badge.tone-wicket {
    border-color: rgba(239, 68, 68, 0.88);
    box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.28) inset;
}

.animation-replay-queue {
    position: absolute;
    left: 10px;
    bottom: 10px;
    z-index: 7;
    min-width: 150px;
    max-width: 230px;
    background: rgba(15, 23, 42, 0.78);
    border: 1px solid rgba(148, 163, 184, 0.34);
    border-radius: 8px;
    padding: 0.3rem 0.45rem;
    font-family: 'IBM Plex Mono', monospace;
    color: #dbeafe;
}

.animation-replay-queue .rq-title {
    font-size: 0.58rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    opacity: 0.85;
    margin-bottom: 0.2rem;
}

.animation-replay-queue .rq-item {
    font-size: 0.58rem;
    line-height: 1.35;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    opacity: 0.78;
}

.animation-settings-panel {
    position: absolute;
    right: 10px;
    bottom: 10px;
    z-index: 9;
    width: 230px;
    background: rgba(15, 23, 42, 0.9);
    border: 1px solid rgba(148, 163, 184, 0.42);
    border-radius: 10px;
    padding: 0.5rem 0.55rem;
    color: #e5e7eb;
    font-family: 'IBM Plex Mono', monospace;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.28);
    display: none;
}

.animation-settings-panel.show {
    display: block;
}

.animation-settings-panel .asp-title {
    font-size: 0.62rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 0.42rem;
    opacity: 0.92;
}

.animation-settings-panel .asp-row {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 0.5rem;
    align-items: center;
    margin-bottom: 0.38rem;
}

.animation-settings-panel .asp-label {
    font-size: 0.58rem;
    opacity: 0.9;
}

.animation-settings-panel .asp-value {
    font-size: 0.58rem;
    color: #93c5fd;
}

.animation-settings-panel input[type=\"range\"] {
    width: 100%;
    margin: 0.12rem 0 0.44rem;
}

.animation-settings-panel .asp-check {
    display: flex;
    gap: 0.4rem;
    align-items: center;
    font-size: 0.58rem;
    margin-bottom: 0.4rem;
}

@keyframes bowlAction {
    0% { transform: translateX(-8px) rotate(-6deg); }
    55% { transform: translateX(2px) rotate(8deg); }
    100% { transform: translateX(0) rotate(0); }
}

@keyframes runupStride {
    0% { transform: translateY(0) rotate(0); }
    35% { transform: translateY(2px) rotate(-4deg); }
    100% { transform: translateY(0) rotate(0); }
}

@keyframes bowlRelease {
    0% { transform: translateX(0) rotate(0); }
    60% { transform: translateX(3px) rotate(8deg); }
    100% { transform: translateX(0) rotate(0); }
}

@keyframes bowlFollowThrough {
    0% { transform: translateY(0); }
    55% { transform: translateY(3px) rotate(-5deg); }
    100% { transform: translateY(0) rotate(0); }
}

@keyframes batSwing {
    0% { transform: rotate(0); }
    50% { transform: rotate(-14deg) translateY(-2px); }
    100% { transform: rotate(0); }
}

@keyframes batSwingRight {
    0% { transform: rotate(0); }
    45% { transform: rotate(-15deg) translateY(-2px) translateX(1px); }
    100% { transform: rotate(0); }
}

@keyframes batSwingLeft {
    0% { transform: rotate(0); }
    45% { transform: rotate(15deg) translateY(-2px) translateX(-1px); }
    100% { transform: rotate(0); }
}

@keyframes sprintStep {
    0% { transform: translateY(0); }
    35% { transform: translateY(-3px) translateX(2px); }
    70% { transform: translateY(1px) translateX(-1px); }
    100% { transform: translateY(0) translateX(0); }
}

@keyframes sprintStepRight {
    0% { transform: translateY(0) translateX(0); }
    35% { transform: translateY(-3px) translateX(2px); }
    70% { transform: translateY(1px) translateX(-1px); }
    100% { transform: translateY(0) translateX(0); }
}

@keyframes sprintStepLeft {
    0% { transform: translateY(0) translateX(0); }
    35% { transform: translateY(-3px) translateX(-2px); }
    70% { transform: translateY(1px) translateX(1px); }
    100% { transform: translateY(0) translateX(0); }
}

@keyframes diveStretch {
    0% { transform: translateX(0) rotate(0); }
    45% { transform: translateX(5px) rotate(9deg); }
    100% { transform: translateX(0) rotate(0); }
}

@keyframes catchHigh {
    0% { transform: translateY(0) rotate(0); }
    50% { transform: translateY(-5px) rotate(-4deg); }
    100% { transform: translateY(0) rotate(0); }
}

@keyframes pickupThrow {
    0% { transform: translateY(0) rotate(0); }
    30% { transform: translateY(3px) rotate(6deg); }
    70% { transform: translateY(-2px) rotate(-8deg); }
    100% { transform: translateY(0) rotate(0); }
}

@keyframes celebrateHop {
    0% { transform: translateY(0); }
    45% { transform: translateY(-7px); }
    100% { transform: translateY(0); }
}

@keyframes signalFour {
    0% { transform: rotate(0); }
    30% { transform: rotate(9deg) translateX(3px); }
    100% { transform: rotate(0); }
}

@keyframes signalSix {
    0% { transform: translateY(0); }
    25% { transform: translateY(-5px); }
    100% { transform: translateY(0); }
}

@keyframes signalOut {
    0% { transform: translateY(0); }
    50% { transform: translateY(-4px) rotate(-6deg); }
    100% { transform: translateY(0); }
}

@keyframes stumpsRattle {
    0% { transform: translateX(0); }
    20% { transform: translateX(-2px); }
    40% { transform: translateX(2px); }
    60% { transform: translateX(-1px); }
    100% { transform: translateX(0); }
}

@keyframes replaySweep {
    0% { left: -40%; opacity: 0; }
    15% { opacity: 0.95; }
    65% { left: 28%; opacity: 0.95; }
    100% { left: 110%; opacity: 0; }
}

@keyframes crowdPulse {
    0% { box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.0) inset, 0 14px 30px rgba(0, 0, 0, 0.35); }
    45% { box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.38) inset, 0 14px 30px rgba(0, 0, 0, 0.35); }
    100% { box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.0) inset, 0 14px 30px rgba(0, 0, 0, 0.35); }
}

@media (prefers-reduced-motion: reduce) {
    .anim-player,
    .animation-stage {
        animation: none !important;
        transition: none !important;
    }

    #animation-ground-svg {
        transform: none !important;
    }

    .animation-replay-stinger,
    .animation-event-badge {
        transition: none !important;
        animation: none !important;
    }
}
