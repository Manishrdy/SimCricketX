{% extends "admin/layout.html" %}
{% block admin_content %}
<div class="admin-page-header">
    <div>
        <h1 class="admin-page-title">All Teams</h1>
        <p class="admin-page-subtitle">{{ total }} team{{ 's' if total != 1 }} across all users</p>
    </div>
</div>

<!-- Search -->
<div class="a-search-wrap">
    <i class="fas fa-search a-search-icon"></i>
    <form method="GET" style="width: 100%;">
        <input type="text" name="q" class="a-search-input" placeholder="Search by name, code, or owner..." value="{{ search }}">
    </form>
</div>

<div class="a-table-wrap">
    <table class="a-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Team Name</th>
                <th>Code</th>
                <th>Owner</th>
                <th>Players</th>
                <th>Pitch Pref</th>
                <th>Created</th>
            </tr>
        </thead>
        <tbody>
            {% for t in teams %}
            <tr>
                <td>{{ t.id }}</td>
                <td style="font-weight: 600;">{{ t.name }}</td>
                <td><span class="a-badge a-badge-info">{{ t.short_code }}</span></td>
                <td>
                    <a href="{{ url_for('admin_user_360', user_email=t.user_id) }}" style="color: var(--accent); text-decoration: none;">
                        {{ t.user_id }}
                    </a>
                </td>
                <td>{{ t.players|length }}</td>
                <td>{{ t.pitch_preference or '-' }}</td>
                <td>{{ t.created_at.strftime('%Y-%m-%d') if t.created_at else 'N/A' }}</td>
            </tr>
            {% else %}
            <tr><td colspan="7" class="a-empty"><p>No teams found</p></td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if total_pages > 1 %}
<div class="a-pagination">
    {% for p in range(1, total_pages + 1) %}
        {% if p == page %}
        <span class="active">{{ p }}</span>
        {% else %}
        <a href="?page={{ p }}{% if search %}&q={{ search }}{% endif %}">{{ p }}</a>
        {% endif %}
    {% endfor %}
</div>
{% endif %}
{% endblock %}
